(this["webpackJsonpspotify-app"]=this["webpackJsonpspotify-app"]||[]).push([[0],{12:function(e,t,n){},14:function(e,t,n){},16:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n(1),r=n.n(a),s=n(6),i=n.n(s),o=(n(12),n(3)),u=n.n(o),l=n(4),p=n(2),b=function(e){var t=e.name,n=e.image,a=e.popularity;return Object(c.jsxs)("div",{className:"br2 ba dark-gray b--black-10 mv2 mv4-ns w-50 ma3-ns w-20-ns center",children:[Object(c.jsx)("img",{src:n,className:"db w-100 br2 br--top",alt:"Album art"}),Object(c.jsxs)("div",{className:"pa2 ph3-ns pb3-ns",children:[Object(c.jsxs)("div",{className:"dt w-100 mt1",children:[Object(c.jsx)("div",{className:"dtc",children:Object(c.jsx)("h1",{className:"f5 f4-ns mv0",children:t})}),Object(c.jsx)("div",{className:"dtc tr",children:Object(c.jsx)("h2",{className:"f5 mv0",children:a})})]}),Object(c.jsx)("p",{className:"f6 lh-copy measure mt2 mid-gray",children:"This is an album"})]})]})},j=function(e){var t=e.userAlbums;return t?(console.log("from the list component",t),Object(c.jsx)("div",{id:"AlbumList",style:{display:"flex",flexWrap:"wrap",justifyContent:"space-around"},children:t.map((function(e){return Object(c.jsx)(b,{name:e.name,image:e.image,popularity:e.popularity},e.id)}))})):null},d=function(e){var t=e.clientId,n=e.redirect;return Object(c.jsx)("div",{className:"App",children:Object(c.jsx)("button",{style:{margin:"10%"},onClick:function(){return window.location.replace("https://accounts.spotify.com/authorize?client_id=".concat(t,"&response_type=code&redirect_uri=").concat(n,"&show_dialog=true&scope=user-read-private%20user-library-read"))},children:"Connect to Spotify!"})})},m=function(e){var t=e.userProfileUrl,n=e.userDisplayName;return Object(c.jsx)("div",{children:Object(c.jsxs)("h1",{children:["Hi there, ",Object(c.jsx)("a",{href:t,children:n}),Object(c.jsx)("br",{})]})})},f=(n(14),n(15),"ebcbc13ca3b34ed6a4cf0bf4d7579df9"),h="http%3A%2F%2F192.168.1.188:3000%2F",O=function(){var e=Object(a.useState)(null),t=Object(p.a)(e,2),n=t[0],r=t[1],s=Object(a.useState)(null),i=Object(p.a)(s,2),o=i[0],b=i[1],O=Object(a.useState)(null),x=Object(p.a)(O,2),v=(x[0],x[1]),y=Object(a.useState)(null),w=Object(p.a)(y,2),g=(w[0],w[1]),k=Object(a.useState)(null),S=Object(p.a)(k,2),N=(S[0],S[1]),_=Object(a.useState)("Loading..."),A=Object(p.a)(_,2),C=A[0],P=A[1],I=Object(a.useState)(null),T=Object(p.a)(I,2),D=(T[0],T[1]),E=Object(a.useState)(null),F=Object(p.a)(E,2),J=F[0],L=F[1],U=Object(a.useState)(null),z=Object(p.a)(U,2),B=z[0],G=z[1],H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o;return{method:"GET",headers:{Authorization:"Bearer ".concat(e)}}};Object(a.useEffect)((function(){""!==window.location.search?M():console.log("Please link with Spotify")}),[]);var M=function(){var e=new URLSearchParams(window.location.search).get("code");r(e),R(e)},R=function(){var e=Object(l.a)(u.a.mark((function e(t){var n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://spotify-test-project.herokuapp.com",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:t,clientId:f,redirect:h})});case 2:return n=e.sent,e.next=5,n.json();case 5:c=e.sent;try{N(new Date),g(c.expires_in),b(c.access_token),v(c.refresh_token),W(c.access_token)}catch(a){console.log(a)}case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W=function(){var e=Object(l.a)(u.a.mark((function e(t){var n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://api.spotify.com/v1/me",H(t));case 3:return n=e.sent,e.next=6,n.json();case 6:c=e.sent,P(c.display_name),D(c.product),L(c.external_urls.spotify),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=Object(l.a)(u.a.mark((function e(){var t,n,c,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],n=0;case 2:if(t.length%50!==0){e.next=15;break}return e.next=5,fetch("https://api.spotify.com/v1/me/albums?offset=".concat(n,"&limit=50"),H());case 5:return c=e.sent,e.next=8,c.json();case 8:if(0!==(a=e.sent).items.length){e.next=11;break}return e.abrupt("break",15);case 11:t=t.concat(a.items),n+=50,e.next=2;break;case 15:K(t);case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),K=function(e){var t=e.map((function(e){return{name:e.album.name,image:e.album.images[0].url,popularity:e.album.popularity,id:e.album.id}}));G(t)};return null===n?Object(c.jsx)(d,{clientId:f,redirect:h}):Object(c.jsxs)("div",{className:"App",children:[Object(c.jsx)(m,{userDisplayName:C,userProfileUrl:J}),Object(c.jsx)("button",{style:{margin:"3%"},onClick:q,children:"Get Albums!"}),Object(c.jsx)(j,{userAlbums:B})]})};i.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(O,{})}),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.873b392e.chunk.js.map