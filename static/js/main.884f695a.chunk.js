(this["webpackJsonpspotify-app"]=this["webpackJsonpspotify-app"]||[]).push([[0],{10:function(e,t,c){},11:function(e,t,c){},13:function(e,t,c){"use strict";c.r(t);var n=c(0),a=c(1),s=c.n(a),o=c(4),i=c.n(o),r=(c(10),c(2)),l=function(e){var t=e.name,c=e.image,a=e.popularity;return Object(n.jsxs)("div",{className:"br2 ba dark-gray b--black-10 mv2 mv4-ns w-50 ma3-ns w-20-ns center",children:[Object(n.jsx)("img",{src:c,className:"db w-100 br2 br--top",alt:"Album art"}),Object(n.jsxs)("div",{className:"pa2 ph3-ns pb3-ns",children:[Object(n.jsxs)("div",{className:"dt w-100 mt1",children:[Object(n.jsx)("div",{className:"dtc",children:Object(n.jsx)("h1",{className:"f5 f4-ns mv0",children:t})}),Object(n.jsx)("div",{className:"dtc tr",children:Object(n.jsx)("h2",{className:"f5 mv0",children:a})})]}),Object(n.jsx)("p",{className:"f6 lh-copy measure mt2 mid-gray",children:"This is an album"})]})]})},u=function(e){var t=e.userAlbums;return t?(console.log("from the list component",t),Object(n.jsx)("div",{id:"AlbumList",style:{display:"flex",flexWrap:"wrap",justifyContent:"space-around"},children:t.map((function(e){return Object(n.jsx)(l,{name:e.name,image:e.image,popularity:e.popularity},e.id)}))})):null},b=(c(11),c(12),"ebcbc13ca3b34ed6a4cf0bf4d7579df9"),j="https%3A%2F%2Fwww.jamescockayne.co.uk%2Fspotify-app%2F",p=function(){var e=Object(a.useState)(null),t=Object(r.a)(e,2),c=t[0],s=t[1],o=Object(a.useState)(null),i=Object(r.a)(o,2),l=i[0],p=i[1],d=Object(a.useState)(null),m=Object(r.a)(d,2),h=(m[0],m[1]),f=Object(a.useState)(null),O=Object(r.a)(f,2),y=(O[0],O[1]),x=Object(a.useState)(null),g=Object(r.a)(x,2),v=(g[0],g[1]),w=Object(a.useState)(null),S=Object(r.a)(w,2),k=S[0],A=S[1],N=Object(a.useState)(null),_=Object(r.a)(N,2),C=_[0],T=_[1],E=Object(a.useState)(null),F=Object(r.a)(E,2),G=F[0],P=F[1],z=Object(a.useState)(null),B=Object(r.a)(z,2),I=B[0],J=B[1];Object(a.useEffect)((function(){""!==window.location.search?L():console.log("Please link with Spotify")}),[]);var L=function(){var e=new URLSearchParams(window.location.search).get("code");s(e),Y(e)},Y=function(e){fetch("https://spotify-test-project.herokuapp.com",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:e,clientId:b,redirect:j})}).then((function(e){return e.json()})).then((function(e){console.log("ran getAccessToken()"),v((new Date).toString()),y(e.expires_in),p(e.access_token),h(e.refresh_token)})).catch(console.log)},D=function(e){var t=e.map((function(e){return{name:e.album.name,image:e.album.images[0].url,popularity:e.album.popularity,id:e.album.id}}));J(t)};return null===c?Object(n.jsx)("div",{className:"App",children:Object(n.jsx)("button",{style:{margin:"10%"},onClick:function(){return window.location.replace("https://accounts.spotify.com/authorize?client_id=".concat(b,"&response_type=code&redirect_uri=").concat(j,"&show_dialog=true&scope=user-read-private%20user-library-read"))},children:"Connect to Spotify!"})}):Object(n.jsxs)("div",{className:"App",children:[Object(n.jsx)("button",{style:{margin:"3%"},onClick:function(){fetch("https://api.spotify.com/v1/me",{method:"GET",headers:{Authorization:"Bearer ".concat(l)}}).then((function(e){return e.json()})).then((function(e){A(e.display_name),T(e.product),P(e.external_urls.spotify)})).catch(console.log)},children:"Get Account Information"}),Object(n.jsxs)("p",{children:["Your name is: ",k,Object(n.jsx)("br",{}),"Product: ",C,Object(n.jsx)("br",{}),"Your profile can be found ",Object(n.jsx)("a",{href:G,children:"here."})]}),Object(n.jsx)("button",{style:{margin:"3%"},onClick:function(){fetch("https://api.spotify.com/v1/me/albums?limit=50",{method:"GET",headers:{Authorization:"Bearer ".concat(l)}}).then((function(e){return e.json()})).then((function(e){D(e.items)}))},children:"Get Albums!"}),Object(n.jsx)(u,{userAlbums:I})]})};i.a.render(Object(n.jsx)(s.a.StrictMode,{children:Object(n.jsx)(p,{})}),document.getElementById("root"))}},[[13,1,2]]]);
//# sourceMappingURL=main.884f695a.chunk.js.map