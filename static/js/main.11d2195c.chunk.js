(this["webpackJsonpspotify-app"]=this["webpackJsonpspotify-app"]||[]).push([[0],{320:function(e,t,n){},322:function(e){e.exports=JSON.parse('{"particles":{"number":{"value":170,"density":{"enable":true,"value_area":400}},"color":{"value":"#ffffff"},"shape":{"type":"circle","stroke":{"width":0,"color":"#000000"},"polygon":{"nb_sides":5},"image":{"src":"img/github.svg","width":100,"height":100}},"opacity":{"value":1,"random":true,"anim":{"enable":true,"speed":1,"opacity_min":0,"sync":false}},"size":{"value":3,"random":true,"anim":{"enable":false,"speed":4,"size_min":0.3,"sync":false}},"line_linked":{"enable":false,"distance":150,"color":"#ffffff","opacity":0.4,"width":1},"move":{"enable":true,"speed":1,"direction":"none","random":true,"straight":false,"out_mode":"out","bounce":false,"attract":{"enable":false,"rotateX":600,"rotateY":600}}},"interactivity":{"detect_on":"canvas","events":{"onhover":{"enable":false,"mode":"bubble"},"onclick":{"enable":false,"mode":"repulse"},"resize":true},"modes":{"grab":{"distance":400,"line_linked":{"opacity":1}},"bubble":{"distance":250,"size":0,"duration":2,"opacity":0,"speed":3},"repulse":{"distance":400,"duration":0.4},"push":{"particles_nb":4},"remove":{"particles_nb":2}}},"retina_detect":true}')},323:function(e,t,n){"use strict";n.r(t);var a=n(2),c=n(5),s=n.n(c),r=n(74),o=n.n(r),i=(n(81),n(9)),l=n.n(i),u=n(21),d=n(12),b=function(e){var t=e.clientId,n=e.redirect;return Object(a.jsx)("div",{className:"App",children:Object(a.jsx)("button",{style:{margin:"10%"},onClick:function(){return window.location.replace("https://accounts.spotify.com/authorize?client_id=".concat(t,"&response_type=code&redirect_uri=").concat(n,"&show_dialog=false&scope=user-read-private%20user-library-read"))},children:"Connect to Spotify!"})})},m=(n(83),function(e){var t=e.loadedSong,n=e.clearSong;return Object(a.jsxs)("div",{children:[Object(a.jsx)("h1",{className:"test",children:t.name}),Object(a.jsx)("p",{className:"test",children:"This is the song details"}),Object(a.jsx)("div",{className:"btn-to-alb-view test",style:{cursor:"pointer"},onClick:n,children:"BACK"})]})}),f=(n(84),function(e){var t=e.loadedAlbum,n=e.clearAlbum,c=e.getSongInfo;return Object(a.jsxs)("div",{className:"album-tracks",children:[Object(a.jsx)("div",{className:"back-btn-to-lib track text-center grow",onClick:n,children:"BACK"}),t.map((function(e){return Object(a.jsxs)("div",{onClick:function(){c(e.id,e.name)},className:"track text-center grow",children:[e.name,"  ",Object(a.jsx)("br",{})]},e.id)}))]})}),p=(n(85),function(e){var t=e.isSongLoaded,n=e.loadedSong,c=e.loadedAlbum,s=e.getSongInfo,r=e.clearAlbum,o=e.clearSong;return Object(a.jsx)("div",{className:"overlay hide",children:t?Object(a.jsx)(m,{loadedSong:n,clearSong:o}):Object(a.jsx)(f,{loadedAlbum:c,getSongInfo:s,clearAlbum:r})})}),j=(n(86),function(e){e.userProfileUrl;var t=e.userDisplayName;return Object(a.jsx)("div",{className:"welcome",children:Object(a.jsxs)("h1",{className:"fade-in",children:["Welcome, ",t,".",Object(a.jsx)("br",{})]})})}),h=(n(87),function(e){var t=e.id,n=e.name,c=e.image,s=e.popularity,r=e.getAlbumTracks;return Object(a.jsxs)("div",{onClick:function(){r(t)},className:"card grow br2 ba dark-gray b--black-10 mv2 mv4-ns w-50 ma3-ns w-20-ns center",children:[Object(a.jsx)("img",{src:c,className:"db w-100 br2 br--top image",alt:"Album art"}),Object(a.jsx)("div",{className:"pa2 ph3-ns pb3-ns background ",children:Object(a.jsxs)("div",{className:"dt w-100 mt1 ",children:[Object(a.jsx)("div",{className:"dtc w-90 ",children:Object(a.jsx)("h1",{className:"f5 f4-ns mv0 white",children:n})}),Object(a.jsx)("div",{className:"dtc tr w-10",children:Object(a.jsx)("h2",{className:"f5 mv0 popularity",children:s})})]})})]})}),v=(n(88),function(e){var t=e.userAlbums,n=e.getAlbumTracks;Object(c.useEffect)((function(){console.log("useeffect ran on album list"),t&&s()}));var s=function(){for(var e=document.getElementsByClassName("popularity"),t=0;t<e.length;t++){var n=Number(e[t].innerHTML);e[t].style.color=n>=75?"green":n>=25?"darkorange":"red"}};return t?Object(a.jsx)("div",{className:"album-list animate",style:{display:"flex",flexWrap:"wrap",justifyContent:"space-around"},children:t.map((function(e){return Object(a.jsx)(h,{id:e.id,name:e.name,image:e.image,popularity:e.popularity,getAlbumTracks:n},e.id)}))}):null}),g=function(e){var t=e.userDisplayName,n=e.userProfileUrl,c=e.userAlbums,s=e.getAlbumTracks;return Object(a.jsxs)("div",{className:"library-view",children:[Object(a.jsx)(j,{userDisplayName:t,userProfileUrl:n}),Object(a.jsx)(v,{userAlbums:c,getAlbumTracks:s})]})},O=n(75),y=n.n(O),x=(n(320),n(321),"ebcbc13ca3b34ed6a4cf0bf4d7579df9"),w="https%3A%2F%2Fwww.jamescockayne.co.uk%2Fspotify-app%2F",k=function(){var e=Object(c.useState)(null),t=Object(d.a)(e,2),s=t[0],r=t[1],o=Object(c.useState)(null),i=Object(d.a)(o,2),m=i[0],f=i[1],j=Object(c.useState)(null),h=Object(d.a)(j,2),v=(h[0],h[1]),O=Object(c.useState)(null),k=Object(d.a)(O,2),N=(k[0],k[1]),S=Object(c.useState)(null),A=Object(d.a)(S,2),_=(A[0],A[1]),T=Object(c.useState)("Loading..."),C=Object(d.a)(T,2),B=C[0],E=C[1],I=Object(c.useState)(null),L=Object(d.a)(I,2),P=(L[0],L[1]),z=Object(c.useState)(null),D=Object(d.a)(z,2),U=D[0],F=D[1],J=Object(c.useState)(null),K=Object(d.a)(J,2),M=K[0],W=K[1],G=Object(c.useState)([]),H=Object(d.a)(G,2),R=H[0],X=H[1],Y=Object(c.useState)(!1),q=Object(d.a)(Y,2),Q=q[0],V=q[1],Z=Object(c.useState)({}),$=Object(d.a)(Z,2),ee=$[0],te=$[1],ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m;return{method:"GET",headers:{Authorization:"Bearer ".concat(e)}}},ae=n(322);Object(c.useEffect)((function(){""!==window.location.search?ce():console.log("Please link with Spotify")}),[]);var ce=function(){var e=new URLSearchParams(window.location.search).get("code");r(e),se(e)},se=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://spotify-test-project.herokuapp.com",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:t,clientId:x,redirect:w})});case 2:return n=e.sent,e.next=5,n.json();case 5:a=e.sent;try{_(new Date),N(a.expires_in),f(a.access_token),v(a.refresh_token),re(a.access_token)}catch(c){console.log(c)}case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),re=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://api.spotify.com/v1/me",ne(t));case 3:return n=e.sent,e.next=6,n.json();case 6:a=e.sent,E(a.display_name),P(a.product),F(a.external_urls.spotify),oe(t),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),oe=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,a,c,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],a=0;case 2:if(n.length%50!==0){e.next=15;break}return e.next=5,fetch("https://api.spotify.com/v1/me/albums?offset=".concat(a,"&limit=50"),ne(t));case 5:return c=e.sent,e.next=8,c.json();case 8:if(0!==(s=e.sent).items.length){e.next=11;break}return e.abrupt("break",15);case 11:n=n.concat(s.items),a+=50,e.next=2;break;case 15:ie(n);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ie=function(e){var t=e.map((function(e){return{name:e.album.name,image:e.album.images[0].url,popularity:e.album.popularity,id:e.album.id}}));W(t)},le=function(){var e=Object(u.a)(l.a.mark((function e(t,n){var a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("getting song info for id: ",t),e.next=3,fetch("https://api.spotify.com/v1/audio-features/".concat(t),ne());case 3:return a=e.sent,e.next=6,a.json();case 6:(c=e.sent).name=n,te(c),V(!0);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ue=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("running getAlbumTracks()"),console.clear(),e.next=4,fetch("https://api.spotify.com/v1/albums/".concat(t,"/tracks"),ne());case 4:return n=e.sent,e.next=7,n.json();case 7:a=e.sent,c=a.items.map((function(e){return{name:e.name,length:e.duration_ms,id:e.id,link:e.external_urls.spotify}})),X(c),document.getElementsByTagName("body")[0].style.overflow="hidden",document.getElementsByClassName("overlay")[0].classList.add("show");case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsxs)("div",{children:[Object(a.jsx)(y.a,{params:ae,className:"particles"}),null===s?Object(a.jsx)(b,{clientId:x,redirect:w}):Object(a.jsxs)("div",{className:"App",children:[Object(a.jsx)(p,{isSongLoaded:Q,loadedSong:ee,loadedAlbum:R,getSongInfo:le,clearAlbum:function(){document.getElementsByClassName("overlay")[0].classList.remove("show"),document.getElementsByTagName("body")[0].style.overflow="visible"},clearSong:function(){V(!1)}}),Object(a.jsx)(g,{userDisplayName:B,userProfileUrl:U,userAlbums:M,getAlbumTracks:ue})]})]})};o.a.render(Object(a.jsx)(s.a.StrictMode,{children:Object(a.jsx)(k,{})}),document.getElementById("root"))},81:function(e,t,n){},83:function(e,t,n){},84:function(e,t,n){},85:function(e,t,n){},86:function(e,t,n){},87:function(e,t,n){},88:function(e,t,n){}},[[323,1,2]]]);
//# sourceMappingURL=main.11d2195c.chunk.js.map